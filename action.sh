#!/system/bin/sh
#
# ============================================================================== 
# ğŸ¬ action.sh - æ¨¡å—æ“ä½œå…¥å£è„šæœ¬
# ============================================================================== 
#
# æä¾›ä¸€é”®å¯åŠ¨/åœæ­¢ä»£ç†æ ¸å¿ƒä¸»ç¨‹åºåŠé˜²ç«å¢™è§„åˆ™çš„æ“ä½œæ¥å£ã€‚
# - ç»Ÿä¸€å…¥å£ï¼Œä¾¿äºå¤–éƒ¨è°ƒç”¨å’Œé›†æˆ
# - ç®€åŒ–ç”¨æˆ·æ“ä½œæµç¨‹
#
# ==============================================================================
set -e

# --- åˆå§‹åŒ–ä¸å˜é‡å®šä¹‰ ---
MODDIR=$(dirname "$0")
# shellcheck source=common.sh
. "$MODDIR/common.sh"

ui_print_safe "ğŸ¬ [action.sh]: æ­£åœ¨åˆ‡æ¢æœåŠ¡çŠ¶æ€..."

if [ -x "$SERVICE" ]; then

  # æ£€æŸ¥æœåŠ¡è¿è¡Œæ ‡è¯†
  if [ -f "$FLAG" ]; then
      # æœåŠ¡å·²è¿è¡Œï¼Œæ‰§è¡Œåœæ­¢æ“ä½œ
      ui_print_safe "â›” [action.sh]: æœåŠ¡å·²è¿è¡Œï¼Œæ­£åœ¨åœæ­¢..."
      # åœæ­¢æœåŠ¡
      sh "$SERVICE" stop >/dev/null 2>&1 || true
  else
      ui_print_safe "ğŸš€ [action.sh]: æœåŠ¡æœªè¿è¡Œï¼Œæ­£åœ¨å¯åŠ¨..."
      # å¯åŠ¨æœåŠ¡
      sh "$SERVICE" >/dev/null 2>&1 || true
  fi
else
  ui_print_safe "âŒ [action.sh]: æœåŠ¡è„šæœ¬ä¸å­˜åœ¨æˆ–ä¸å¯æ‰§è¡Œ"
fi